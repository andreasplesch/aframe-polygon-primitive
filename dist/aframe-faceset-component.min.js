!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){function n(e){if("object"==typeof e)return e;for(var t=e.match(/([+\-0-9eE\.]+)/g),r=[],n={},i=0,a=t?t.length:0;a>i;i+=3)n=new THREE.Vector3(+t[i+0],+t[i+1],+t[i+2]),r.push(n);return r}function i(e){if("object"==typeof e)return e;for(var t=e.match(/([+\-0-9eE\.]+)/g),r=[],n={},i=0,a=t?t.length:0;a>i;i+=3)n=new THREE.Face3(+t[i+0],+t[i+1],+t[i+2]),r.push(n);return r}function a(e){if("object"==typeof e)return e;for(var t=e.match(/([+\-0-9eE\.]+)/g),r=[],n={},i=0,a=t?t.length:0;a>i;i+=2)n=new THREE.Vector2(+t[i+0],+t[i+1]),r.push(n);return r}function o(e,t,r){var n=new THREE.Geometry;if(n.vertices=e.vertices,n.computeBoundingBox(),0==e.triangles.length){for(var i=s(n),a=u(e,i),o=t.x[a],c=t.y[a],f=e.vertices.map(function(e){return[e[o]+0,e[c]+0]}),h=l.triangulate(f),p=0;p<h.length;p+=3)n.faces.push(new THREE.Face3(h[p],h[p+1],h[p+2]));return n}return n.faces=e.triangles,n}function s(e){var t=e.boundingBox,r=t.max.clone();return r.sub(t.min),r}function u(e,t){var r=e.projectdir.toLowerCase();return"x"!==r&&"y"!==r&&"z"!==r&&(r="z",t.x<t.y&&t.x<t.z&&(r="x"),t.y<t.x&&t.y<t.z&&(r="y")),r}function c(e,t,r){var n=e.uvs;if(n.length>0){for(var i=+n.length,a=i;a<t.vertices.length;a++)n.push(n[i].clone);return n}var o=s(t),c=u(e,o),f=r.x[c],l=r.y[c],h=t.vertices,p=t.boundingBox,g=p.min[f],v=p.min[l],m=[];return h.forEach(function(e){m.push(new THREE.Vector2((e[f]-g)/o[f],(e[l]-v)/o[l]))}),m}function f(e,t,r){var n=helperMatrix.makeTranslation(t.x-r.x,t.y-r.y,t.z-r.z);e.applyMatrix(n),e.verticesNeedsUpdate=!0}if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var l=r(1);AFRAME.registerComponent("faceset",{schema:{vertices:{"default":[{x:-.5,y:0,z:.5},{x:.5,y:0,z:.5},{x:.5,y:0,z:-.5},{x:-.5,y:0,z:-.5}],parse:function(e){return n(e)},stringify:function(e){return e.map(AFRAME.utils.coordinates.stringify).join(",")}},triangles:{"default":[],parse:function(e){return i(e)},stringify:function(e){return e.map(AFRAME.utils.coordinates.stringify).join(",")}},uvs:{"default":[],parse:function(e){return a(e)},stringify:function(e){return e.map(function(e){return"object"!=typeof e?e:[e.x,e.y].join(" ")}).join(",")}},projectdir:{type:"string","default":"auto"},translate:{type:"vec3"}},init:function(){this.dmaps={x:{x:"y",y:"x",z:"x"},y:{x:"z",y:"z",z:"y"}}},update:function(e){e=e||{};var t=this.data,r=e.translate||this.schema.translate["default"],n=AFRAME.utils.diff(e,t),i=this.el.getOrCreateObject3D("mesh",THREE.Mesh),a=i.geometry,s=!(1===Object.keys(n).length&&("translate"in n||"uvs"in n)),u=!AFRAME.utils.deepEqual(t.translate,r),l=t.vertices.length!==a.vertices.length||t.triangles.length!==a.faces.length,h="uvs"in n||l;if(s){i.geometry.dispose(),i.geometry=null;var p=i.material;a=o(this.data,this.dmaps,l),i=new THREE.Mesh(a,p),this.el.setObject3D("mesh",i),a.verticesNeedUpdate=!0}if(u&&f(a,t.translate,r),h){a.faceVertexUvs[0]=[];var g=a.faces,v=c(t,a,this.dmaps);g.forEach(function(e,t){a.faceVertexUvs[0].push([v[e.a],v[e.b],v[e.c]])}),a.uvsNeedUpdate=!0}a.mergeVertices(),a.computeFaceNormals(),a.computeVertexNormals()},remove:function(){this.el.getObject3D("mesh").geometry.dispose=new THREE.Geometry}})},function(e,t,r){var n;!function(){"use strict";function t(e){var t,r,n,i,a,o,s=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY;for(t=e.length;t--;)e[t][0]<s&&(s=e[t][0]),e[t][0]>c&&(c=e[t][0]),e[t][1]<u&&(u=e[t][1]),e[t][1]>f&&(f=e[t][1]);return r=c-s,n=f-u,i=Math.max(r,n),a=s+.5*r,o=u+.5*n,[[a-20*i,o-i],[a,o+20*i],[a+20*i,o-i]]}function r(e,t,r,n){var i,o,s,u,c,f,l,h,p,g,v=e[t][0],m=e[t][1],y=e[r][0],E=e[r][1],d=e[n][0],x=e[n][1],b=Math.abs(m-E),j=Math.abs(E-x);if(a>b&&a>j)throw new Error("Eek! Coincident points!");return a>b?(u=-((d-y)/(x-E)),f=(y+d)/2,h=(E+x)/2,i=(y+v)/2,o=u*(i-f)+h):a>j?(s=-((y-v)/(E-m)),c=(v+y)/2,l=(m+E)/2,i=(d+y)/2,o=s*(i-c)+l):(s=-((y-v)/(E-m)),u=-((d-y)/(x-E)),c=(v+y)/2,f=(y+d)/2,l=(m+E)/2,h=(E+x)/2,i=(s*c-u*f+h-l)/(s-u),o=b>j?s*(i-c)+l:u*(i-f)+h),p=y-i,g=E-o,{i:t,j:r,k:n,x:i,y:o,r:p*p+g*g}}function i(e){var t,r,n,i,a,o;for(r=e.length;r;)for(i=e[--r],n=e[--r],t=r;t;)if(o=e[--t],a=e[--t],n===a&&i===o||n===o&&i===a){e.splice(r,2),e.splice(t,2);break}}var a=1/1048576;n={triangulate:function(e,n){var o,s,u,c,f,l,h,p,g,v,m,y,E=e.length;if(3>E)return[];if(e=e.slice(0),n)for(o=E;o--;)e[o]=e[o][n];for(u=new Array(E),o=E;o--;)u[o]=o;for(u.sort(function(t,r){return e[r][0]-e[t][0]}),c=t(e),e.push(c[0],c[1],c[2]),f=[r(e,E+0,E+1,E+2)],l=[],h=[],o=u.length;o--;h.length=0){for(y=u[o],s=f.length;s--;)p=e[y][0]-f[s].x,p>0&&p*p>f[s].r?(l.push(f[s]),f.splice(s,1)):(g=e[y][1]-f[s].y,p*p+g*g-f[s].r>a||(h.push(f[s].i,f[s].j,f[s].j,f[s].k,f[s].k,f[s].i),f.splice(s,1)));for(i(h),s=h.length;s;)m=h[--s],v=h[--s],f.push(r(e,v,m,y))}for(o=f.length;o--;)l.push(f[o]);for(f.length=0,o=l.length;o--;)l[o].i<E&&l[o].j<E&&l[o].k<E&&f.push(l[o].i,l[o].j,l[o].k);return f},contains:function(e,t){if(t[0]<e[0][0]&&t[0]<e[1][0]&&t[0]<e[2][0]||t[0]>e[0][0]&&t[0]>e[1][0]&&t[0]>e[2][0]||t[1]<e[0][1]&&t[1]<e[1][1]&&t[1]<e[2][1]||t[1]>e[0][1]&&t[1]>e[1][1]&&t[1]>e[2][1])return null;var r=e[1][0]-e[0][0],n=e[2][0]-e[0][0],i=e[1][1]-e[0][1],a=e[2][1]-e[0][1],o=r*a-n*i;if(0===o)return null;var s=(a*(t[0]-e[0][0])-n*(t[1]-e[0][1]))/o,u=(r*(t[1]-e[0][1])-i*(t[0]-e[0][0]))/o;return 0>s||0>u||s+u>1?null:[s,u]}},e.exports=n}()}]);